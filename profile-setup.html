<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>9jaMeet - Profile Setup</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      background-color: #f4f6f8;
      font-family: 'Segoe UI', sans-serif;
      background-image: url(images/Copilot_20250603_140707.png);
      background-size: cover;
      background-position: center center;
      background-repeat: no-repeat;
      background-attachment: fixed;
    }

    .profile-card {
      max-width: 700px;
      margin: 3rem auto;
      background-color: #fff;
      border-radius: 1rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      padding: 2rem;
      border-top: 6px solid #0f3460;
      position: relative;
    }

    .form-label {
      color: #0f3460;
      font-weight: 600;
    }

    .btn-primary {
      background-color: #0f3460;
      border: none;
    }

    .btn-primary:hover {
      background-color: #0d2c50;
    }

    .language-switcher {
      text-align: right;
      margin-bottom: 1rem;
    }

    .logo-text {
      font-size: 1.75rem;
      font-weight: bold;
      color: #0f3460;
    }

    /* Image preview styling */
    #profileImagePreview {
      width: 120px;
      height: 120px;
      object-fit: cover;
      border-radius: 50%;
      border: 3px solid #0f3460;
      display: block;
      margin-bottom: 1rem;
      cursor: pointer;
      transition: box-shadow 0.3s ease;
    }

    #profileImagePreview:hover {
      box-shadow: 0 0 10px #0f3460aa;
    }

    /* Success alert positioning */
    #successAlert {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1050;
      display: none;
    }

    /* Back button */
    .back-btn {
      position: absolute;
      top: 1rem;
      left: 1rem;
      color: #0f3460;
      font-weight: bold;
      text-decoration: none;
    }
    .back-btn:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="profile-card">
      <a href="dashboard.html" class="back-btn" aria-label="Back to Dashboard">&larr; Back to Dashboard</a>

      <div class="d-flex justify-content-between align-items-center mb-4">
        <div class="logo-text">9jaMeet</div>
        <select id="languageSelector" class="form-select w-auto" aria-label="Select language">
          <option value="en" selected>üá¨üáß English</option>
          <option value="yo">üü¢ Yoruba</option>
          <option value="ha">üî¥ Hausa</option>
          <option value="ig">üîµ Igbo</option>
        </select>
      </div>

      <h4 class="mb-4" data-i18n="profile_setup">Profile Setup</h4>

      <!-- Profile Image Upload -->
      <label for="profileImage" class="form-label" data-i18n="upload_photo">Upload Profile Photo</label>
      <img
        src="https://via.placeholder.com/120?text=Upload"
        alt="Profile Image Preview"
        id="profileImagePreview"
        tabindex="0"
        role="button"
        aria-label="Upload Profile Photo Preview"
      />
      <input
        type="file"
        id="profileImage"
        accept="image/*"
        class="form-control mb-4"
        aria-describedby="profileImageHelp"
        style="display:none"
      />
      <div id="profileImageHelp" class="form-text mb-3" data-i18n="upload_hint">Click the circle above to select an image.</div>

      <form id="profileForm" aria-label="Profile Setup Form" novalidate>
        <div class="mb-3">
          <label for="fullName" class="form-label" data-i18n="full_name">Full Name</label>
          <input type="text" class="form-control" id="fullName" required aria-label="Full Name" />
          <div class="invalid-feedback" data-i18n="required_field">This field is required.</div>
        </div>

        <div class="mb-3">
          <label for="username" class="form-label" data-i18n="username">Username</label>
          <input type="text" class="form-control" id="username" required aria-label="Username" />
          <div class="invalid-feedback" data-i18n="required_field">This field is required.</div>
        </div>

        <div class="mb-3">
          <label for="phone" class="form-label" data-i18n="phone_number">Phone Number</label>
          <input type="tel" class="form-control" id="phone" required aria-label="Phone Number" />
          <div class="invalid-feedback" data-i18n="required_field">This field is required.</div>
        </div>

        <div class="mb-3">
          <label for="bio" class="form-label" data-i18n="bio">Short Bio</label>
          <textarea class="form-control" id="bio" rows="3" aria-label="Short Bio"></textarea>
        </div>

        <div class="mb-3">
          <label for="gender" class="form-label" data-i18n="gender">Gender</label>
          <select class="form-select" id="gender" required aria-label="Gender">
            <option value="">-- Select --</option>
            <option value="male" data-i18n="male">Male</option>
            <option value="female" data-i18n="female">Female</option>
            <option value="nonbinary" data-i18n="nonbinary">Non-Binary</option>
          </select>
          <div class="invalid-feedback" data-i18n="required_field">This field is required.</div>
        </div>

        <div class="mb-3">
          <label for="dob" class="form-label" data-i18n="dob">Date of Birth</label>
          <input type="date" class="form-control" id="dob" required aria-label="Date of Birth" />
          <div class="invalid-feedback" data-i18n="required_field">This field is required.</div>
        </div>

        <div class="mb-3">
          <label for="maritalStatus" class="form-label" data-i18n="marital_status">Marital Status</label>
          <select class="form-select" id="maritalStatus" aria-label="Marital Status">
            <option value="">-- Select --</option>
            <option value="single" data-i18n="single">Single</option>
            <option value="married" data-i18n="married">Married</option>
            <option value="divorced" data-i18n="divorced">Divorced</option>
          </select>
        </div>

        <div class="mb-3">
          <label for="occupation" class="form-label" data-i18n="occupation">Occupation</label>
          <input type="text" class="form-control" id="occupation" aria-label="Occupation" />
        </div>

        <div class="mb-3">
          <label for="location" class="form-label" data-i18n="location">Location (State)</label>
          <input type="text" class="form-control" id="location" aria-label="Location" />
        </div>

        <div class="mb-3">
          <label for="interests" class="form-label" data-i18n="interests">Interests</label>
          <input type="text" class="form-control" id="interests" aria-label="Interests" />
        </div>

        <div class="mb-3">
          <label for="instagram" class="form-label" data-i18n="instagram">Instagram Link (optional)</label>
          <input type="url" class="form-control" id="instagram" placeholder="https://instagram.com/yourhandle" aria-label="Instagram Link" />
        </div>

        <div class="mb-3">
          <label for="facebook" class="form-label" data-i18n="facebook">Facebook Link (optional)</label>
          <input type="url" class="form-control" id="facebook" placeholder="https://facebook.com/yourprofile" aria-label="Facebook Link" />
        </div>

        <div class="form-check form-switch mb-4">
          <input class="form-check-input" type="checkbox" id="isPublic" role="switch" aria-label="Make profile public" />
          <label class="form-check-label" for="isPublic" data-i18n="profile_public">Make my profile public</label>
        </div>

        <button type="submit" class="btn btn-primary w-100" aria-label="Submit profile">Save Profile</button>
      </form>
    </div>
  </div>

  <!-- Success Alert -->
  <div id="successAlert" class="alert alert-success" role="alert" aria-live="assertive" aria-atomic="true">
    Profile saved successfully!
  </div>

  <script>
    // Language translations
    const translations = {
      yo: {
        profile_setup: "·π¢eto Profaili",
        full_name: "Oruko pipe",
        username: "Oruko olumulo",
        phone_number: "Nomba fonu",
        bio: "Itan nipa ara re",
        gender: "Ibalopo",
        dob: "Ojo ibi",
        marital_status: "Ipo iyawo",
        occupation: "Ise",
        location: "Ipinle",
        interests: "Awon nkan ti o nif·∫π si",
        instagram: "Akoj·ªç Instagram (a·π£ayan)",
        facebook: "Akoj·ªç Facebook (a·π£ayan)",
        profile_public: "·π¢e profaili mi ni gbangba",
        upload_photo: "Po si f·ªçto profaili",
        upload_hint: "T·∫π b·ªçtini iyipo loke lati yan f·ªçto.",
        required_field: "Ojuami yi nilo lati kun.",
        male: "Okunrin",
        female: "Obinrin",
        nonbinary: "K√≤ fi ·∫πÃÄt·ªçÃÅ s·∫πÃÅy√¨n",
        single: "·ªåÃÄt·ªçÃÄ",
        married: "√åy√†w√≥",
        divorced: "√åy√†w√≥ t√≥ ti y√†"
      },
      ha: {
        profile_setup: "Saitin Bayanai",
        full_name: "Cikakken suna",
        username: "Sunan mai amfani",
        phone_number: "Lambar waya",
        bio: "Bayani game da kanka",
        gender: "Jinsi",
        dob: "Ranar haihuwa",
        marital_status: "Matsayin aure",
        occupation: "Aiki",
        location: "Jihar da kake",
        interests: "Sha'awa",
        instagram: "Shafin Instagram (za…ìi)",
        facebook: "Shafin Facebook (za…ìi)",
        profile_public: "Bayyana bayanan martaba na",
        upload_photo: "Loda hoton martaba",
        upload_hint: "Danna da‚Äôirar sama don za…ìar hoto.",
        required_field: "Wannan filin dole ne a cika shi.",
        male: "Namiji",
        female: "Mace",
        nonbinary: "Ba na …óaya ba",
        single: "Ba aure",
        married: "Aure",
        divorced: "Bayan aure"
      },
      ig: {
        profile_setup: "Hazie profa·ªãl·ª•",
        full_name: "Aha zuru ezu",
        username: "Aha onye ·ªçr·ª•",
        phone_number: "N·ªçmba ekwent·ªã",
        bio: "Gwa anyi gbasara onwe gi",
        gender: "Okike",
        dob: "·ª§b·ªçch·ªã ·ªçm·ª•m·ª•",
        marital_status: "·ªån·ªçd·ª• di/nwunye",
        occupation: "·ªår·ª•",
        location: "Steeti",
        interests: "Mmas·ªã",
        instagram: "Instagram link (nh·ªçr·ªç)",
        facebook: "Facebook link (nh·ªçr·ªç)",
        profile_public: "Mee profa·ªãl·ª• m ka ·ªçha",
        upload_photo: "Bulite foto profa·ªãl·ª•",
        upload_hint: "P·ªãa okirikiri d·ªã n'elu ·ªãh·ªçr·ªç foto.",
        required_field: "A ga-ejup·ª•ta ubi a.",
        male: "Nwoke",
        female: "Nwanyi",
        nonbinary: "·ªå b·ª•gh·ªã nwoke ma ·ªç b·ª• nwany·ªã",
        single: "Naan·ªã",
        married: "Al·ª•mdi na nwunye",
        divorced: "Al·ª•mdi na nwunye gbajiri"
      }
    };

    // Handle language switching
    const langSelector = document.getElementById('languageSelector');
    const translateElements = document.querySelectorAll('[data-i18n]');

    function translatePage(lang) {
      const dict = translations[lang] || translations.en;
      translateElements.forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (dict[key]) {
          el.textContent = dict[key];
        }
      });
    }

    langSelector.addEventListener('change', e => {
      translatePage(e.target.value);
    });

    // Initial translation
    translatePage('en');

    // Profile Image upload + preview logic
    const profileImageInput = document.getElementById('profileImage');
    const profileImagePreview = document.getElementById('profileImagePreview');

    profileImagePreview.addEventListener('click', () => profileImageInput.click());
    profileImagePreview.addEventListener('keydown', e => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        profileImageInput.click();
      }
    });

    profileImageInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file && file.type.startsWith('image/')) {
        const reader = new FileReader();
        reader.onload = (e) => {
          profileImagePreview.src = e.target.result;
        };
        reader.readAsDataURL(file);
      } else {
        profileImagePreview.src = 'https://via.placeholder.com/120?text=Upload';
      }
    });

    // Form validation + submission with success alert
    const form = document.getElementById('profileForm');
    const successAlert = document.getElementById('successAlert');

    form.addEventListener('submit', (e) => {
      e.preventDefault();

      // Simple validation
      let valid = true;
      form.querySelectorAll('input[required], select[required]').forEach(input => {
        if (!input.value.trim()) {
          input.classList.add('is-invalid');
          valid = false;
        } else {
          input.classList.remove('is-invalid');
        }
      });

      if (!valid) return;

      // Here: Hook to Firebase Firestore later

      // Show success alert
      successAlert.style.display = 'block';
      setTimeout(() => {
        successAlert.style.display = 'none';
      }, 3500);

      // Optionally, reset the form after submission
      // form.reset();
      // Reset profile image preview
      // profileImagePreview.src = 'https://via.placeholder.com/120?text=Upload';
    });
  </script>
</body>
</html>
